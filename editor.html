<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTextJS 1.01 (c) hhtg. 2023</title>
    <style>
        body{
            background-color: #444444;
        }
        #buttonRow{
            font-size: smaller;
            background-color: #0000ee;
            color: #ffffff;
            border: 2px solid #555555;
        }
        #textField{
            /* font-size:larger; */
            /* font-family: monospace; */
            background-color: #555555;
            color: #ffffff;
            border: 2px solid #555555;
        }
        #textbox{
            background-color: #444444;
            color: #eeeeee;
            width:99%;
            font-family: monospace;
            font-size: large;
        }
        #dName{
            background-color: #0000ee;
            color: #eeeeee;
        }
        #exportField{
            background-color: #00aa00;
            color: #eeeeee;
            border: 2px solid #555555;
        }
        #clip{
            background-color: #dd0000;
            color: #eeeeee;
            border: 2px solid #555555
        }
        #copyright{
            float: right;
        }
    </style>
    <script defer="true">
        function doNew(){
            document.getElementById("textbox").value="";
        }
        function doRandom(){
            document.getElementById("textbox").value="random ...";
        }
        function doLoad(){
            let file = document.getElementById("textName").files[0];
            let reader = new FileReader();
            let textArea = document.getElementById("textbox");
            reader.onload = function (e) {
                let textArea = document.getElementById("textbox");
                textArea.value = e.target.result;
            reader.readAsText(file);
            }
            textArea.value ="quark!";
        }
        function doDownload(){
            let saveText = document.getElementById("textbox");
            let fileN = document.getElementById("dName");
            const textData = saveText.value;
            const textDataBlob = new Blob([saveText.value],{ type: "text/plain" });
            const downloadUrl = window.URL.createObjectURL(textDataBlob)
            const downloadLink = document.createElement('a');
            downloadLink.download = fileN.value
            downloadLink.href = downloadUrl;
            downloadLink.click();
        }
        function printTextBox() {
            childWindow = window.open('','childWindow','location=yes, menubar=yes, toolbar=yes');
            childWindow.document.open();
            childWindow.document.write('<html><head></head><body>');
            childWindow.document.write(document.getElementById('textbox').value.replace(/\n/gi,'<br>'));
            childWindow.document.write('</body></html>');
            childWindow.print();
            childWindow.document.close();
            childWindow.close();
        }
        function doExport(){
            let insert=document.getElementById("textbox").value;
            document.getElementById("exportPreview").innerHTML=insert;
        }
        function doPreview(){
            let insert="clipboard to come in future ..."
            document.getElementById("exportPreview").innerHTML=insert;
        }
        function doSelAll(){
            let selection=document.getElementById("textbox").select();        
        }
        function doCopy(){
                document.getElementById('textbox').addEventListener('click',function(){  
                    let text = document.getElementById('textA');
                    text.select();
                    document.execCommand('copy');
                })
        }
        function doPaste(){
            //document.getElementById("textbox").execCommand("paste");
        }
        function doInfo(){
            alert("simple Text Editor in Javascript (c) hhtg. v1.02 from 05-12-2023 10h58");
        }
    </script>
</head>
<body>
    <div id="buttonRow">
        <button onclick="doInfo()">INFO!</button>
        <button onclick="doNew()">new</button>
        <button onclick="doRandom()">random</button>
        <input id="textName" type="file" value="untiteld.txt">
        <button>save</button>
        <button onclick="doLoad()">load</button>
        <span id="copyright">hTextJS v1 (c) hhtg. 2023</span>
        <br>
        <button onclick="doDownload()">download</button>
        as:<input id="dName" type="text" value="empty.txt" size="10">
        <button onclick="printTextBox()">print...</button>
        <button onclick="doExport()">export...</button>
        <button onclick="doPreview()">export clipboard ...</button>
        <button onclick="doSelAll()">select all</button>
        <button onclick="doCopy()">copy</button>
        <button>cut</button>
        <button onclick=""doPaste()>paste</button>
        <!-- <div id="copyToClipboard-a" class="clipboard icon"></div> -->
    </div>
    <div id="textField">
        <!-- <label for="textbox">text:</label> -->
        <!-- <div id="copyright">jEditV1hhtg2023</div> -->
        <textarea id="textbox" rows="24" cols="80">empty universe ...</textarea>
    </div>
    <div id="clip">
        clipboard:
        <span id="clipb">
            empty
        </span>
    </div>
    <div id="exportField">
        export area:
        <span id="exportPreview">
            empty
        </span>
    </div>
</body>
</html>